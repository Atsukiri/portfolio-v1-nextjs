'use client';
import ImageGallery from 'react-image-gallery';
import { useEffect, useState } from 'react';

export default function DynamicGallery({ albumId }) {
  const [items, setItems] = useState([]);

  useEffect(() => {
    fetch(`https://api.imgur.com/3/album/${albumId}/images`, {
      headers: { Authorization: `Client-ID ${process.env.NEXT_PUBLIC_IMGUR_CLIENT_ID}` }
    })
    .then(res => res.json())
    .then(data => {
      //data = JSON.parse(`{"status":200,"success":true,"data":[{"id":"Q7ZGqFa","deletehash":"934HW2DlpKgh8Ac","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"55-60","name":"055-060.jpg","type":"image/jpeg","width":4640,"height":2608,"size":717791,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/Q7ZGqFa.jpeg","tags":[],"datetime":1706252133,"mp4":"","hls":""},{"id":"h2UMpIE","deletehash":"wrZGNEQIkUDJHoB","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"19-24","name":"019-024.jpg","type":"image/jpeg","width":4640,"height":2608,"size":777643,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/h2UMpIE.jpeg","tags":[],"datetime":1706252132,"mp4":"","hls":""},{"id":"ekHQy3k","deletehash":"NN2PUp4oHIQWlTS","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"49-54","name":"049-054.jpg","type":"image/jpeg","width":4640,"height":2608,"size":695565,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/ekHQy3k.jpeg","tags":[],"datetime":1706252133,"mp4":"","hls":""},{"id":"hDx6Sr5","deletehash":"janHlSJ5DuC6qAo","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"37-42","name":"037-042.jpg","type":"image/jpeg","width":4640,"height":2608,"size":702654,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/hDx6Sr5.jpeg","tags":[],"datetime":1706252133,"mp4":"","hls":""},{"id":"J5Vg6iW","deletehash":"5GY7RUYB6AIxNva","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"43-48","name":"043-048.jpg","type":"image/jpeg","width":4640,"height":2608,"size":663870,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/J5Vg6iW.jpeg","tags":[],"datetime":1706252132,"mp4":"","hls":""},{"id":"8a2ccR2","deletehash":"MnvWaaucJblb7uj","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"73-78","name":"073-078.jpg","type":"image/jpeg","width":4640,"height":2608,"size":948378,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/8a2ccR2.jpeg","tags":[],"datetime":1706252133,"mp4":"","hls":""},{"id":"ppjMGcC","deletehash":"S0d508ANocT38AL","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"97-102","name":"097-102.jpg","type":"image/jpeg","width":4640,"height":2608,"size":666926,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/ppjMGcC.jpeg","tags":[],"datetime":1706252141,"mp4":"","hls":""},{"id":"Sz6cHLt","deletehash":"HKmDG4nLp72gHxO","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"91-96","name":"091-096.jpg","type":"image/jpeg","width":4640,"height":2608,"size":723562,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/Sz6cHLt.jpeg","tags":[],"datetime":1706252142,"mp4":"","hls":""},{"id":"d2bGL2r","deletehash":"nyOFzhdH7FrD1A8","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"85-90","name":"085-090.jpg","type":"image/jpeg","width":4640,"height":2608,"size":680519,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/d2bGL2r.jpeg","tags":[],"datetime":1706252142,"mp4":"","hls":""},{"id":"iBzIJ6a","deletehash":"U528FryOpbw8ECa","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"61-66","name":"061-066.jpg","type":"image/jpeg","width":4640,"height":2608,"size":718229,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/iBzIJ6a.jpeg","tags":[],"datetime":1706252142,"mp4":"","hls":""},{"id":"9TtAplg","deletehash":"aTkfsuP3YFqWCgN","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"79-84","name":"079-084.jpg","type":"image/jpeg","width":4640,"height":2608,"size":769781,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/9TtAplg.jpeg","tags":[],"datetime":1706252142,"mp4":"","hls":""},{"id":"EqRfRhZ","deletehash":"fAlXbLrlqPD6LL3","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"67-72","name":"067-072.jpg","type":"image/jpeg","width":4640,"height":2608,"size":664068,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/EqRfRhZ.jpeg","tags":[],"datetime":1706252143,"mp4":"","hls":""},{"id":"9Rpv3cA","deletehash":"dCfsPrkvSSgVQRq","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"115-120","name":"115-120.jpg","type":"image/jpeg","width":4640,"height":2608,"size":642838,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/9Rpv3cA.jpeg","tags":[],"datetime":1706252150,"mp4":"","hls":""},{"id":"EhU2ytD","deletehash":"3Su20Lpz1XoG2ob","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"169-174","name":"169-174.jpg","type":"image/jpeg","width":4640,"height":2608,"size":714337,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/EhU2ytD.jpeg","tags":[],"datetime":1706252150,"mp4":"","hls":""},{"id":"ELrzHmE","deletehash":"iDxYin5aYW8ORiR","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"103-108","name":"103-108.jpg","type":"image/jpeg","width":4640,"height":2608,"size":686647,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/ELrzHmE.jpeg","tags":[],"datetime":1706252151,"mp4":"","hls":""},{"id":"UZyYsqy","deletehash":"5MW6mNK5OOzl3fq","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"121-126","name":"121-126.jpg","type":"image/jpeg","width":4640,"height":2608,"size":784624,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/UZyYsqy.jpeg","tags":[],"datetime":1706252151,"mp4":"","hls":""},{"id":"roXvFy8","deletehash":"Wc6pU1qpGiphjqG","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"133-138","name":"133-138.jpg","type":"image/jpeg","width":4640,"height":2608,"size":686207,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/roXvFy8.jpeg","tags":[],"datetime":1706252151,"mp4":"","hls":""},{"id":"jpK9z36","deletehash":"WEQaPrZolVSHB7j","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"181-186","name":"181-186.jpg","type":"image/jpeg","width":4640,"height":2608,"size":903584,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/jpK9z36.jpeg","tags":[],"datetime":1706252151,"mp4":"","hls":""},{"id":"f6cYzPj","deletehash":"CgNfGGRgnFNCqbI","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"193-198","name":"193-198.jpg","type":"image/jpeg","width":4640,"height":2608,"size":739303,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/f6cYzPj.jpeg","tags":[],"datetime":1706252160,"mp4":"","hls":""},{"id":"X3VoLBm","deletehash":"zgbrjY4I2Ptd2qG","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"109-114","name":"109-114.jpg","type":"image/jpeg","width":4640,"height":2608,"size":682851,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/X3VoLBm.jpeg","tags":[],"datetime":1706252160,"mp4":"","hls":""},{"id":"l7QLt3H","deletehash":"Opk4rfqoxVpxTuz","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"151-156","name":"151-156.jpg","type":"image/jpeg","width":4640,"height":2608,"size":698716,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/l7QLt3H.jpeg","tags":[],"datetime":1706252160,"mp4":"","hls":""},{"id":"V8Ixefz","deletehash":"E6A9cNwb93tFoZh","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"205-210","name":"205-210.jpg","type":"image/jpeg","width":4640,"height":2608,"size":715867,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/V8Ixefz.jpeg","tags":[],"datetime":1706252161,"mp4":"","hls":""},{"id":"0DlkuXA","deletehash":"eG2UMshCJr8jdB4","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"229-234","name":"229-234.jpg","type":"image/jpeg","width":4640,"height":2608,"size":760795,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/0DlkuXA.jpeg","tags":[],"datetime":1706252161,"mp4":"","hls":""},{"id":"81Nc5t9","deletehash":"210W5tRj8jrD5pF","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"199-204","name":"199-204.jpg","type":"image/jpeg","width":4640,"height":2608,"size":771526,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/81Nc5t9.jpeg","tags":[],"datetime":1706252161,"mp4":"","hls":""},{"id":"2vNlnyx","deletehash":"88MO6jO9FPzuy1O","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"145-150","name":"145-150.jpg","type":"image/jpeg","width":3264,"height":1836,"size":453392,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/2vNlnyx.jpeg","tags":[],"datetime":1706252169,"mp4":"","hls":""},{"id":"KSafBcV","deletehash":"a0JT4QrpFZ3UaXM","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"217-222","name":"217-222.jpg","type":"image/jpeg","width":4640,"height":2608,"size":656905,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/KSafBcV.jpeg","tags":[],"datetime":1706252170,"mp4":"","hls":""},{"id":"ygKbPWv","deletehash":"ZmyiK4gElDanEeO","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"163-168","name":"163-168.jpg","type":"image/jpeg","width":2608,"height":4640,"size":723528,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/ygKbPWv.jpeg","tags":[],"datetime":1706252170,"mp4":"","hls":""},{"id":"YVxD3jq","deletehash":"k3epXR2vuJMBjdE","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"235-240","name":"235-240.jpg","type":"image/jpeg","width":4640,"height":2608,"size":832543,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/YVxD3jq.jpeg","tags":[],"datetime":1706252171,"mp4":"","hls":""},{"id":"KiqKxRQ","deletehash":"H2vQWUygSzSo7Io","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"241-245","name":"241-245.jpg","type":"image/jpeg","width":4640,"height":2608,"size":689309,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/KiqKxRQ.jpeg","tags":[],"datetime":1706252171,"mp4":"","hls":""},{"id":"dQZQz0l","deletehash":"Q3Fs3uoNJskijvX","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"245-250","name":"246-250.jpg","type":"image/jpeg","width":4640,"height":2608,"size":784401,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/dQZQz0l.jpeg","tags":[],"datetime":1706252172,"mp4":"","hls":""},{"id":"9s6YtK9","deletehash":"ONJjY2sXv72ZOMq","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"157-162","name":"157-162.jpg","type":"image/jpeg","width":4640,"height":2608,"size":627064,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/9s6YtK9.jpeg","tags":[],"datetime":1706252177,"mp4":"","hls":""},{"id":"MrMlHx8","deletehash":"mGpvwh7yPUpMw6l","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"127-132","name":"127-132.jpg","type":"image/jpeg","width":4640,"height":2608,"size":698208,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/MrMlHx8.jpeg","tags":[],"datetime":1706252178,"mp4":"","hls":""},{"id":"pO6AUP8","deletehash":"pAjw3dC2q8tqFWn","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"211-216","name":"211-216.jpg","type":"image/jpeg","width":4640,"height":2608,"size":658712,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/pO6AUP8.jpeg","tags":[],"datetime":1706252179,"mp4":"","hls":""},{"id":"TP2uGfW","deletehash":"muI1c46Hy94JVK7","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"187-192","name":"187-192.jpg","type":"image/jpeg","width":4640,"height":2608,"size":709279,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/TP2uGfW.jpeg","tags":[],"datetime":1706252179,"mp4":"","hls":""},{"id":"aXoVsbp","deletehash":"KOoPD1pfZZnaWs0","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"139-144","name":"139-144.jpg","type":"image/jpeg","width":4640,"height":2608,"size":802432,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/aXoVsbp.jpeg","tags":[],"datetime":1706252179,"mp4":"","hls":""},{"id":"ksbWuQj","deletehash":"ja1d2TI4KZLqV4m","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"175-180","name":"175-180.jpg","type":"image/jpeg","width":4640,"height":2608,"size":729011,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/ksbWuQj.jpeg","tags":[],"datetime":1706252179,"mp4":"","hls":""},{"id":"DQrPFM4","deletehash":"QYXjiV2clkI7img","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"223-228","name":"223-228.jpg","type":"image/jpeg","width":4640,"height":2608,"size":957356,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/DQrPFM4.jpeg","tags":[],"datetime":1706252181,"mp4":"","hls":""},{"id":"i9YAXTW","deletehash":"GMelbQ7pUwh4fP0","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"13-18","name":"013-018.jpg","type":"image/jpeg","width":4640,"height":2608,"size":766303,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/i9YAXTW.jpeg","tags":[],"datetime":1706252605,"mp4":"","hls":""},{"id":"FLGysl6","deletehash":"D96QPvSegtmNezr","account_id":177088348,"account_url":null,"ad_type":null,"ad_url":null,"title":null,"description":"25-30","name":"025-030.jpg","type":"image/jpeg","width":4640,"height":2608,"size":885832,"views":0,"section":null,"vote":null,"bandwidth":0,"animated":false,"favorite":false,"in_gallery":true,"in_most_viral":false,"has_sound":false,"is_ad":false,"nsfw":null,"link":"https://i.imgur.com/FLGysl6.jpeg","tags":[],"datetime":1706252639,"mp4":"","hls":""}]}
//`);
      setItems(data.data.map(img => ({
        original: img.link,
        thumbnail: img.link,
        originalAlt: img.description || '',
        thumbnailAlt: img.description || '',
      })));
    })
    .catch(err => console.error('Imgur fetch err:', err));
  }, [albumId]);

  return <ImageGallery items={items} showPlayButton={false} />;
}
